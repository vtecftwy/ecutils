<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Utility Functions to work with images. Includes all stable utility functions.">

<title>ecutils - image_utils module - Utility functions for Images</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="ecutils - image_utils module - Utility functions for Images">
<meta property="og:description" content="Utility Functions to work with images. Includes all stable utility functions.">
<meta property="og:site-name" content="ecutils">
<meta name="twitter:title" content="ecutils - image_utils module - Utility functions for Images">
<meta name="twitter:description" content="Utility Functions to work with images. Includes all stable utility functions.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ecutils</span>
    </a>
  </div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><code>image_utils</code> module - Utility functions for Images</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><code>ecutils</code> package</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dev_utils.html" class="sidebar-item-text sidebar-link"><code>dev_utils</code> - Development Utilities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda_stats_utils.html" class="sidebar-item-text sidebar-link"><code>eda_stats_utils</code> - Utility functions for EDA and Statistics</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./image_utils.html" class="sidebar-item-text sidebar-link active"><code>image_utils</code> module - Utility functions for Images</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ipython.html" class="sidebar-item-text sidebar-link"><code>ipython</code> module - Utility functions for Jupyter NB</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ml.html" class="sidebar-item-text sidebar-link">ml.html</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plotting.html" class="sidebar-item-text sidebar-link"><code>plotting</code> module - Functions for images</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#get_date_from_file_name" id="toc-get_date_from_file_name" class="nav-link active" data-scroll-target="#get_date_from_file_name">get_date_from_file_name</a></li>
  <li><a href="#date_is_within_year" id="toc-date_is_within_year" class="nav-link" data-scroll-target="#date_is_within_year">date_is_within_year</a></li>
  <li><a href="#exif2dt" id="toc-exif2dt" class="nav-link" data-scroll-target="#exif2dt">exif2dt</a></li>
  <li><a href="#add_missing_dates_to_exif" id="toc-add_missing_dates_to_exif" class="nav-link" data-scroll-target="#add_missing_dates_to_exif">add_missing_dates_to_exif</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/vtecftwy/ecutils/tree/master/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><code>image_utils</code> module - Utility functions for Images</h1>
</div>

<div>
  <div class="description">
    Utility Functions to work with images. Includes all stable utility functions.
  </div>
</div>


<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<hr>
<p><a href="https://github.com/vtecftwy/ecutils/tree/master/blob/master/ecutils/image_utils.py#L19" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="get_date_from_file_name" class="level3">
<h3 class="anchored" data-anchor-id="get_date_from_file_name">get_date_from_file_name</h3>
<blockquote class="blockquote">
<pre><code> get_date_from_file_name (path2file, date_pattern=None)</code></pre>
</blockquote>
<p>Retrieve the date from the file name.</p>
<p>Returns the date encoded in the file name (as per date_pattern) as a datetime. Default date pattern is YY-MM-DD, i.g. regex ^(-(-(*</p>
<p>path2file: pathlib.Path object pointing to the file date_pattern: the regex pattern for the date, if different from the default one returns: date in datetime format, if found. False if not found or if file does not exist</p>
<hr>
<p><a href="https://github.com/vtecftwy/ecutils/tree/master/blob/master/ecutils/image_utils.py#L51" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="date_is_within_year" class="level3">
<h3 class="anchored" data-anchor-id="date_is_within_year">date_is_within_year</h3>
<blockquote class="blockquote">
<pre><code> date_is_within_year (date, year)</code></pre>
</blockquote>
<p>True if the passed date (datetime) is within year, False otherwise</p>
<hr>
<p><a href="https://github.com/vtecftwy/ecutils/tree/master/blob/master/ecutils/image_utils.py#L56" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="exif2dt" class="level3">
<h3 class="anchored" data-anchor-id="exif2dt">exif2dt</h3>
<blockquote class="blockquote">
<pre><code> exif2dt (exif_d)</code></pre>
</blockquote>
<p>Transform a date in bytes format from EXIF into datetime format</p>
<p>exif_d: date in exif format, i.e.&nbsp;bytes. E.g. b”2018:11:21” returns: the date in datetime or False if no date is detected or not well formatted</p>
<hr>
<p><a href="https://github.com/vtecftwy/ecutils/tree/master/blob/master/ecutils/image_utils.py#L73" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_missing_dates_to_exif" class="level3">
<h3 class="anchored" data-anchor-id="add_missing_dates_to_exif">add_missing_dates_to_exif</h3>
<blockquote class="blockquote">
<pre><code> add_missing_dates_to_exif (path2folder, year=None, maxhours=24,
                            do_not_update_exif=False, verbose=False)</code></pre>
</blockquote>
<p>Add missing EXIF original and digitized dates, based on file creation or date in file name. In order to better control the data changes and avoid mistaken exif updates, the process is done on a year by year basis, i.e.&nbsp;a specific year needs to be passed to the function and only dates within the passed year will be updated. All other dates will be disregarded.</p>
<p>path2folder: …………. pathlib.Path: object pointing to the folder holding all jpg photos to handle year: ……………….. int: year used to filter all dates maxhours: ……………. int: maximum acceptable difference (in hours) between exif dates and file dates do_not_update_exif: …… bool: flag to prevent updating the exif file, used in debugging or testing verbose: …………….. bool: flag to print original, updated and retrieved updated EXIF info</p>
<p>Logic of the function: 1. Retrieve EXIF info from image 2. When there is no EXIF.DatetimeOriginal in the image EXIF: - use date from file name if exists, else - use date from creation or modification, whichever is earlier 3. When there is an EXIF.DatetimeOriginal, compare with date from file, if any: - if difference &lt; maxhours, do nothing - if difference &gt;= maxhours, use date from filename 4. If the date extracted from file name or file creation/modification date is not in passed year, skipped any change</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>